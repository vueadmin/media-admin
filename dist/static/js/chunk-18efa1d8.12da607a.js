(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18efa1d8"],{2240:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.hanldeShowResourceDialog}},[e._v("添加资源")]),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),o("el-table-column",{attrs:{width:"150",label:"资源名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),o("el-table-column",{attrs:{label:"演唱",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.singer)+" ")]}}])}),o("el-table-column",{attrs:{label:"作者",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.author)+" ")]}}])}),o("el-table-column",{attrs:{label:"资源类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.type)+" ")]}}])}),o("el-table-column",{attrs:{label:"资源链接",width:"450"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.url)+" ")]}}])}),o("el-table-column",{attrs:{label:"资源介绍"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.desc)+" ")]}}])}),o("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.handleFetchResourcesQrcode(t.row)}}},[e._v("二维码")]),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.hanleFecthUpdate(t.row)}}},[e._v("编辑")]),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){return e.handleFecthDelete(t.row)}}},[e._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:"新增资源",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"资源名称","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"资源简介","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),o("el-form-item",{attrs:{label:"资源地址","label-width":e.formLabelWidth}},[o("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),o("el-form-item",{attrs:{label:"演唱者","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.singer,callback:function(t){e.$set(e.form,"singer",t)},expression:"form.singer"}})],1),o("el-form-item",{attrs:{label:"作者","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),o("el-form-item",{attrs:{label:"资源类型","label-width":e.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[o("el-option",{attrs:{label:"音频",value:"mp3"}}),o("el-option",{attrs:{label:"视频",value:"mp4"}})],1)],1),o("el-form-item",{attrs:{label:"上传资源","label-width":e.formLabelWidth}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"http://api.zhangguoheng.cn/resources/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-remove":e.beforeRemove,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.hanldeCreateResources}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"编辑资源",visible:e.dialogFormVisibleUpdate},on:{"update:visible":function(t){e.dialogFormVisibleUpdate=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"资源名称","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"资源简介","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),o("el-form-item",{attrs:{label:"资源地址","label-width":e.formLabelWidth}},[o("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),o("el-form-item",{attrs:{label:"演唱者","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.singer,callback:function(t){e.$set(e.form,"singer",t)},expression:"form.singer"}})],1),o("el-form-item",{attrs:{label:"作者","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),o("el-form-item",{attrs:{label:"资源类型","label-width":e.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[o("el-option",{attrs:{label:"音频",value:"mp3"}}),o("el-option",{attrs:{label:"视频",value:"mp4"}})],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisibleUpdate=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.hanldeUpdateResources}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"二维码",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-image",{attrs:{src:e.qrcodeUrl}})],1)],1)},a=[],r=(o("99af"),o("fb6a"),o("b0c0"),o("b775"));function i(e){return Object(r["a"])({url:"/resources/add",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/resources/edit",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/resources/del",method:"post",data:e})}function c(){return Object(r["a"])({url:"/resources/index",method:"get"})}function u(e){return Object(r["a"])({url:"/resources/qrcode",method:"post",data:e})}var f={data:function(){return{list:null,listLoading:!0,httpUrl:"http://api.zhangguoheng.cn/",form:{name:"",desc:"",type:"",url:"",author:"",singer:""},formLabelWidth:"120px",dialogFormVisible:!1,dialogFormVisibleUpdate:!1,dialogVisible:!1,qrcodeUrl:"",fileList:[]}},created:function(){this.fetchData()},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleSuccess:function(e,t){200===e.code&&(this.form.url=this.httpUrl+e.data)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},fetchData:function(){var e=this;this.listLoading=!0,c().then((function(t){console.log(t),e.listLoading=!1,e.list=t.data}))},hanldeShowResourceDialog:function(){this.form={name:"",desc:"",type:"",url:"",author:"",singer:""},this.dialogFormVisible=!0},hanldeCreateResources:function(){var e=this;i(this.form).then((function(t){e.dialogFormVisible=!1,e.fetchData()}))},handleFetchResourcesQrcode:function(e){var t=this;this.dialogVisible=!0;var o={name:e.index_id,url:e.url};u(o).then((function(e){console.log(e.qrcode),t.qrcodeUrl=t.httpUrl+e.qrcode.slice(2,16),console.log(t.qrcodeUrl)}))},hanleFecthUpdate:function(e){this.dialogFormVisibleUpdate=!0,this.form=e},handleFecthDelete:function(e){var t=this;this.$confirm("此操作将永久删除该资源, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s(e).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.fetchData()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},hanldeUpdateResources:function(){var e=this;n(this.form).then((function(t){e.dialogFormVisibleUpdate=!1,e.fetchData()}))}}},d=f,m=o("2877"),h=Object(m["a"])(d,l,a,!1,null,null,null);t["default"]=h.exports},fb6a:function(e,t,o){"use strict";var l=o("23e7"),a=o("861d"),r=o("e8b5"),i=o("23cb"),n=o("50c4"),s=o("fc6a"),c=o("8418"),u=o("b622"),f=o("1dde"),d=o("ae40"),m=f("slice"),h=d("slice",{ACCESSORS:!0,0:0,1:2}),b=u("species"),p=[].slice,g=Math.max;l({target:"Array",proto:!0,forced:!m||!h},{slice:function(e,t){var o,l,u,f=s(this),d=n(f.length),m=i(e,d),h=i(void 0===t?d:t,d);if(r(f)&&(o=f.constructor,"function"!=typeof o||o!==Array&&!r(o.prototype)?a(o)&&(o=o[b],null===o&&(o=void 0)):o=void 0,o===Array||void 0===o))return p.call(f,m,h);for(l=new(void 0===o?Array:o)(g(h-m,0)),u=0;m<h;m++,u++)m in f&&c(l,u,f[m]);return l.length=u,l}})}}]);